buildscript {
    repositories {
        mavenCentral()
        jcenter()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        classpath("gradle.plugin.com.github.spotbugs.snom:spotbugs-gradle-plugin:4.3.0")
    }
}

apply plugin: 'org.springframework.boot'

allprojects {
    version "${version != 'unspecified' ? version : 'SNAPSHOT'}"

    apply plugin: 'pmd'
    apply plugin: 'com.github.spotbugs'

    repositories {
        mavenCentral()
    }

    pmd {
        rulesMinimumPriority = 3
        toolVersion = "6.21.0"

        ruleSets = []
        ruleSetFiles = files("$rootProject.projectDir/config/pmd-rules.xml")
    }

    spotbugs {
        excludeFilter = file("$rootProject.projectDir/config/spotbugs-exclude.xml")
        dependencies {
            spotbugs "com.github.spotbugs:spotbugs:$spotbugsVersion"
        }
    }
}

wrapper {
    gradleVersion = '7.3-rc-1'
}

println("[what-to-watch] Building version: $version")
